<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Background Interface" href="background.html" /><link rel="prev" title="Exchange Interface" href="exchange.html" />
        <link rel="prefetch" href="../_static/wordmark-Antelope-fixed.png" as="image" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.07.19 -->
        <title>Quantity Interface - Antelope 0.3.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=25af2a20" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Antelope 0.3.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/wordmark-Antelope-fixed.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Antelope 0.3.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../principles.html">Key principles of operation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_types.html">Basic Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relations.html">Quantitative Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relations.html#semi-quantitative-information">Semi-Quantitative Information</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../interfaces.html">Organizing LCA Data in Antelope</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Organizing LCA Data in Antelope</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="basic.html">Basic Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html">Index Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="exchange.html">Exchange Interface</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Quantity Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="background.html">Background Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="configure.html">Configure Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="foreground.html">Foreground Interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Ways to use Antelope</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fragments.html">What is a Fragment?</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../antelope.html">API Documentation</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of API Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="abstract.html">Antelope Query and Subclasses</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Antelope Query and Subclasses</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="basic.html">Basic Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="exchange.html">Exchange Interface</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Quantity Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html">Index Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="background.html">Background Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="configure.html">Configure Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="foreground.html">Foreground Interface</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../refs/antelope.refs.html">Entity References</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Entity References</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../refs/quantity_ref.html">QuantityRefs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../refs/flow_ref.html">Flow Refs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../refs/process_ref.html">Process Refs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../refs/exchange_ref.html">ExchangeRefs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../antelope.flows.html">antelope.flows package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../antelope.models.html">antelope.models package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exchanges_from_spreadsheet.html">Exchanges From Spreadsheet</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/interfaces/quantity.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="module-antelope.interfaces.iquantity">
<span id="quantity-interface"></span><h1>Quantity Interface<a class="headerlink" href="#module-antelope.interfaces.iquantity" title="Link to this heading">¶</a></h1>
<p>It’s taken me a long time to figure out how the quantity interface should work, but it is finally coming together.</p>
<p>There are two quantitative relations common to all LCA implementations, which I have named the exchange relation and
the quantity relation.  The first relates magnitudes of flows to one another through a particular process or activity,
and includes essentially all inventory modeling.  The second relates magnitudes of quantities to one another through
a particular flow in a particular context / locale, and includes both quantity conversion (e.g. kg to MJ) and LCIA.</p>
<p>The quantity interface is meant to capture that entire second group. The core of it is the ‘quantity relation’, which
is a function that maps (flowable, reference quantity, query quantity, context, locale) =&gt; a real number</p>
<p>Of course, the quantity_relation can be messy “under the hood”: the key question in designing the interface is how to
expose “fuzzy” matches to the user: matches that require reference quantity conversion, use of a proxy locale, or when
there are multiple matches (i.e. inexact or proxy flowable or context)</p>
<p>There are also multiple forms for the response to take: pure numeric (or numeric with uncertainty in some fantasy
future world), as a characterization factor or QuantityConversion object, as an LCIA Result object.</p>
<p>The proposed model for the quantity interface is as follows:</p>
<blockquote>
<div><p>QRResult interface: has properties ‘flowable’, ‘ref’, ‘query’, ‘context’, ‘value’, ‘locale’, ‘origin’
QuantityConversion includes sequential QRResults and masks locale and origin</p>
<dl class="simple">
<dt>cf (flow[able], query quantity, ref quantity=None, context=None, locale=’GLO’, strategy=’first’)</dt><dd><dl class="simple">
<dt>=&gt; number.  quantity_relation(*).value = cf(:) (except the args are not in the same order)</dt><dd><p>amount of the query quantity that corresponds to a unit of the ref quantity</p>
</dd>
</dl>
</dd>
<dt>quantity_relation (flowable, ref quantity, query quantity, context, locale=’GLO’, strategy=’first’)</dt><dd><p>=&gt;  single QRresult, chosen by named strategy.</p>
</dd>
<dt>quantity_conversions (flow[able], query quantity, ref quantity=None, context=None, locale=’GLO’) “comprehensive”</dt><dd><dl class="simple">
<dt>=&gt; [list of valid results (flowable / context proxies),</dt><dd><p>list of geographic proxies,
list of mismatched results (ref quantity conversion error]</p>
</dd>
</dl>
</dd>
<dt>do_lcia(query quantity, exchanges iterable, locale=’GLO’)</dt><dd><p>=&gt; LciaResult object, with a detail for each exchange item.  locale is used if it is more specific than the</p>
</dd>
</dl>
</div></blockquote>
<p>For cf and QuantityConversion, ‘flowable’ could be replaced with a flow entity, from which would be taken ref quantity
and context.  If ref quantity is not supplied, nor is flow an entity, QuantityConversion will return all valid results
and cf() will fail.  For the Quantity Relation, all 4 core arguments are explicitly required (locale still optional).</p>
<p>Additional methods:</p>
<blockquote>
<div><dl class="simple">
<dt>profile (flow[able], ref_quantity=None, context=None)</dt><dd><p>=&gt; sequence of cfs from quantity conversions for all characterized quantities for the flow[able]</p>
</dd>
<dt>factors (quantity, flowable=None, ref_quantity=None, context=None)</dt><dd><dl class="simple">
<dt>=&gt; sequence of characterizations for the named quantity, optionally filtered by flowable and/or compartment,</dt><dd><p>optionally converted to the named reference</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<dl class="py exception">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityRequired">
<em class="property"><span class="k"><span class="pre">exception</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">antelope.interfaces.iquantity.</span></span><span class="sig-name descname"><span class="pre">QuantityRequired</span></span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityRequired" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.NoFactorsFound">
<em class="property"><span class="k"><span class="pre">exception</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">antelope.interfaces.iquantity.</span></span><span class="sig-name descname"><span class="pre">NoFactorsFound</span></span><a class="headerlink" href="#antelope.interfaces.iquantity.NoFactorsFound" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.ConversionReferenceMismatch">
<em class="property"><span class="k"><span class="pre">exception</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">antelope.interfaces.iquantity.</span></span><span class="sig-name descname"><span class="pre">ConversionReferenceMismatch</span></span><a class="headerlink" href="#antelope.interfaces.iquantity.ConversionReferenceMismatch" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.FlowableMismatch">
<em class="property"><span class="k"><span class="pre">exception</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">antelope.interfaces.iquantity.</span></span><span class="sig-name descname"><span class="pre">FlowableMismatch</span></span><a class="headerlink" href="#antelope.interfaces.iquantity.FlowableMismatch" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityInterface">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">antelope.interfaces.iquantity.</span></span><span class="sig-name descname"><span class="pre">QuantityInterface</span></span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityInterface" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="abstract.html#antelope.interfaces.abstract_query.AbstractQuery" title="antelope.interfaces.abstract_query.AbstractQuery"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractQuery</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityInterface.profile">
<span class="sig-name descname"><span class="pre">profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flow</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityInterface.profile" title="Link to this definition">¶</a></dt>
<dd><p>Generate characterizations for the named flow or flowable, with the reference quantity noted in each case
:param flow:
:return: list of characterizations</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityInterface.characterize">
<span class="sig-name descname"><span class="pre">characterize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flowable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_quantity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_quantity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'GLO'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityInterface.characterize" title="Link to this definition">¶</a></dt>
<dd><p>Add Characterization data for a flowable, reporting the amount of a query quantity that is equal to a unit
amount of a reference quantity, for a given context and location.</p>
<p>At the native level, this is only used internally. At the qdb level there is basically no reason to use it–
characterizations should only get added via import_cfs() which is part of get_canonical()</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flowable</strong> – string or flow external ref</p></li>
<li><p><strong>ref_quantity</strong> – string or external ref</p></li>
<li><p><strong>query_quantity</strong> – string or external ref</p></li>
<li><p><strong>value</strong> – float or dict of locations to floats</p></li>
<li><p><strong>context</strong> – string</p></li>
<li><p><strong>location</strong> – string, ignored if value is dict</p></li>
<li><p><strong>kwargs</strong> – overwrite=False, origin=query_quantity.origin, others?</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>new or updated characterization</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityInterface.factors">
<span class="sig-name descname"><span class="pre">factors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">quantity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flowable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityInterface.factors" title="Link to this definition">¶</a></dt>
<dd><p>Return characterization factors for the given quantity, subject to optional flowable and context
filter constraints. This is ill-defined because the reference unit is not explicitly reported in current
serialization for characterizations (it is implicit in the flow)– but it can be added as a keyword.
:param quantity:
:param flowable:
:param context:
:return: a generator of Characterizations</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityInterface.cf">
<span class="sig-name descname"><span class="pre">cf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quantity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_quantity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">locale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'GLO'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityInterface.cf" title="Link to this definition">¶</a></dt>
<dd><p>Determine a characterization factor value for a given quantity
:param flow: flow entity ref or flowable string
:param quantity:
:param ref_quantity: [None] if flow is entity, flow.reference_entity is used unless specified
:param context: [None] if flow is entity, flow.context is used
:param locale: [‘GLO’]
:param strategy: [None] TBD by implementation
:param kwargs:
:return: a float</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityInterface.quantity_relation">
<span class="sig-name descname"><span class="pre">quantity_relation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flowable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_quantity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_quantity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">locale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'GLO'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityInterface.quantity_relation" title="Link to this definition">¶</a></dt>
<dd><p>Return a single number that converts the a unit of the reference quantity into the query quantity for the
given flowable, compartment, and locale (default ‘GLO’).  If no locale is found, this would be a great place
to run a spatial best-match algorithm.
:param flowable:
:param ref_quantity:
:param query_quantity:
:param context:
:param locale: [‘GLO’]
:return: a QrResult</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityInterface.do_lcia">
<span class="sig-name descname"><span class="pre">do_lcia</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">quantity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inventory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">locale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'GLO'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityInterface.do_lcia" title="Link to this definition">¶</a></dt>
<dd><p>Successively implement the quantity relation over an iterable of exchanges.
we should probably generalize this to automatically expect a list of results, to support running whole
methodologies. This is now supported in antelope_foreground and xdb.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>quantity</strong></p></li>
<li><p><strong>inventory</strong></p></li>
<li><p><strong>locale</strong></p></li>
<li><p><strong>kwargs</strong></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an LciaResult whose components are processes encountered in the inventory</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityInterface.lcia">
<span class="sig-name descname"><span class="pre">lcia</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">process</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_flow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quantity_ref</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityInterface.lcia" title="Link to this definition">¶</a></dt>
<dd><p>Perform process foreground LCIA for the given quantity reference.  Included for compatibility with antelope v1.
In this query, the inventory is computed remotely; whereas with quantity.do_lcia() inventory knowledge is
required</p>
<dl class="simple">
<dt>The way we imagine this working in the days of future XDB/QDB:</dt><dd><ul class="simple">
<li><p>it’s not foreground LCIA at all, it’s encapsulated LCIA</p></li>
<li><p>it’s not part of the quantity interface, it’s part of the basic interface</p></li>
<li><p>it requires background data implemented at the server, even if the client is denied background authorization
(hence the basic interface)</p></li>
<li><p>either the quantity ref must be known locally or resolvable to a do_lcia operation by the catalog</p></li>
<li><p>there is also the implied need for sys_lcia which is a POST operation that uses sys_lci</p></li>
</ul>
</dd>
</dl>
<p>It needs to be rewritten.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>process</strong></p></li>
<li><p><strong>ref_flow</strong></p></li>
<li><p><strong>quantity_ref</strong></p></li>
<li><p><strong>kwargs</strong></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an LciaResult whose components are flows</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityInterface.norm">
<span class="sig-name descname"><span class="pre">norm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">quantity_ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">region</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityInterface.norm" title="Link to this definition">¶</a></dt>
<dd><p>Return a normalization factor for the named quantity ref, as a single number.
:param quantity_ref:
:param region: not well supported
:param kwargs:
:return: a floating-point number, which is 0.0 if no normalisationFactors (OpenLCA spec) are available.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityInterface.get_canonical">
<span class="sig-name descname"><span class="pre">get_canonical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">quantity</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityInterface.get_canonical" title="Link to this definition">¶</a></dt>
<dd><p>This is not really qdb-specific as trivial for non-qdbs.
Retrieve a canonical quantity based on a synonym or other distinguishable term.  Canonical quantities
include standard concepts like “mass” that have a semantic scope that is broader than LCA, and also reference
versions of LCIA methods such as CML2001 / GWP-100. It is up to the implementation to canonicalize these.
:param quantity: external_id of quantity
:return: QuantityRef</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityInterface.get_factors">
<span class="sig-name descname"><span class="pre">get_factors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">quantity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flow_specs</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityInterface.get_factors" title="Link to this definition">¶</a></dt>
<dd><p>Accept an iterable of flow specifications (either a flow UUID which is known(?) and/or (flowable, ref_quantity,
context, locale)). Return a list of FlowFactors
:param quantity: a query quantity
:param flow_specs: an iterable of FlowSpec
:param kwargs:
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityInterface.flows_with_origin">
<span class="sig-name descname"><span class="pre">flows_with_origin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flowable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">locale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityInterface.flows_with_origin" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of flows matching the supplied characteristics
:param origin:
:param flowable:
:param context:
:param locale:
:param kwargs:
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="antelope.interfaces.iquantity.QuantityInterface.post_flows">
<span class="sig-name descname"><span class="pre">post_flows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flows</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#antelope.interfaces.iquantity.QuantityInterface.post_flows" title="Link to this definition">¶</a></dt>
<dd><p>flows_with_origin as POST/PUT/PATCH
:param flows: iterable of inputs to f_w_o
:return:</p>
</dd></dl>

</dd></dl>

</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="background.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Background Interface</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="exchange.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Exchange Interface</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Brandon Kuczenski
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Quantity Interface</a><ul>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityRequired"><code class="docutils literal notranslate"><span class="pre">QuantityRequired</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.NoFactorsFound"><code class="docutils literal notranslate"><span class="pre">NoFactorsFound</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.ConversionReferenceMismatch"><code class="docutils literal notranslate"><span class="pre">ConversionReferenceMismatch</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.FlowableMismatch"><code class="docutils literal notranslate"><span class="pre">FlowableMismatch</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityInterface"><code class="docutils literal notranslate"><span class="pre">QuantityInterface</span></code></a><ul>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityInterface.profile"><code class="docutils literal notranslate"><span class="pre">QuantityInterface.profile()</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityInterface.characterize"><code class="docutils literal notranslate"><span class="pre">QuantityInterface.characterize()</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityInterface.factors"><code class="docutils literal notranslate"><span class="pre">QuantityInterface.factors()</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityInterface.cf"><code class="docutils literal notranslate"><span class="pre">QuantityInterface.cf()</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityInterface.quantity_relation"><code class="docutils literal notranslate"><span class="pre">QuantityInterface.quantity_relation()</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityInterface.do_lcia"><code class="docutils literal notranslate"><span class="pre">QuantityInterface.do_lcia()</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityInterface.lcia"><code class="docutils literal notranslate"><span class="pre">QuantityInterface.lcia()</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityInterface.norm"><code class="docutils literal notranslate"><span class="pre">QuantityInterface.norm()</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityInterface.get_canonical"><code class="docutils literal notranslate"><span class="pre">QuantityInterface.get_canonical()</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityInterface.get_factors"><code class="docutils literal notranslate"><span class="pre">QuantityInterface.get_factors()</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityInterface.flows_with_origin"><code class="docutils literal notranslate"><span class="pre">QuantityInterface.flows_with_origin()</span></code></a></li>
<li><a class="reference internal" href="#antelope.interfaces.iquantity.QuantityInterface.post_flows"><code class="docutils literal notranslate"><span class="pre">QuantityInterface.post_flows()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=e259d695"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>